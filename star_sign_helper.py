import streamlit as st
from datetime import datetime

# æ˜Ÿåº§æ—¥æœŸèŒƒå›´
zodiac_dates = [
    ("æ‘©ç¾¯åº§", (1, 1), (1, 19)),
    ("æ°´ç“¶åº§", (1, 20), (2, 18)),
    ("åŒé±¼åº§", (2, 19), (3, 20)),
    ("ç™½ç¾Šåº§", (3, 21), (4, 19)),
    ("é‡‘ç‰›åº§", (4, 20), (5, 20)),
    ("åŒå­åº§", (5, 21), (6, 20)),
    ("å·¨èŸ¹åº§", (6, 21), (7, 22)),
    ("ç‹®å­åº§", (7, 23), (8, 22)),
    ("å¤„å¥³åº§", (8, 23), (9, 22)),
    ("å¤©ç§¤åº§", (9, 23), (10, 22)),
    ("å¤©èåº§", (10, 23), (11, 21)),
    ("å°„æ‰‹åº§", (11, 22), (12, 21)),
    ("æ‘©ç¾¯åº§", (12, 22), (12, 31)),
]

# æ˜Ÿåº§æ€§æ ¼è¯å…¸
zodiac_traits = {
    "ç™½ç¾Šåº§": "çƒ­æƒ…å†²åŠ¨ï¼Œè¡ŒåŠ¨æ´¾ğŸ”¥",
    "é‡‘ç‰›åº§": "ç¨³é‡è¸å®ï¼Œçˆ±å¥½ç¾é£ŸğŸ’",
    "åŒå­åº§": "èªæ˜ä¼¶ä¿ï¼Œç¤¾äº¤è¾¾äººğŸŒ€",
    "å·¨èŸ¹åº§": "æ¸©æŸ”é¡¾å®¶ï¼Œæƒ…æ„Ÿä¸°å¯ŒğŸŒŠ",
    "ç‹®å­åº§": "è‡ªä¿¡éœ¸æ°”ï¼Œé¢†å¯¼èŒƒå„¿ğŸ”¥",
    "å¤„å¥³åº§": "ç»†è‡´è®¤çœŸï¼Œè¿½æ±‚å®Œç¾ğŸ”",
    "å¤©ç§¤åº§": "ä¼˜é›…å…¬æ­£ï¼Œæ³¨é‡å¹³è¡¡âš–ï¸",
    "å¤©èåº§": "ç¥ç§˜å¼ºçƒˆï¼Œç›´è§‰æ•é”ğŸ¦‚",
    "å°„æ‰‹åº§": "çƒ­çˆ±è‡ªç”±ï¼Œå–œæ¬¢å†’é™©ğŸ¹",
    "æ‘©ç¾¯åº§": "è„šè¸å®åœ°ï¼Œè€åŠ›å¼ºğŸ’¼",
    "æ°´ç“¶åº§": "æ€æƒ³å‰å«ï¼Œç‰¹ç«‹ç‹¬è¡ŒğŸ§ ",
    "åŒé±¼åº§": "æ„Ÿæ€§æµªæ¼«ï¼Œæƒ³è±¡åŠ›ä¸°å¯ŒğŸ¨",
}

# æ”¯æŒå¤šç§è¾“å…¥æ˜ å°„
zodiac_map = {
    "ç™½ç¾Š": "ç™½ç¾Šåº§", "aries": "ç™½ç¾Šåº§", "baiyang": "ç™½ç¾Šåº§",
    "é‡‘ç‰›": "é‡‘ç‰›åº§", "taurus": "é‡‘ç‰›åº§", "jinniu": "é‡‘ç‰›åº§",
    "åŒå­": "åŒå­åº§", "gemini": "åŒå­åº§", "shuangzi": "åŒå­åº§",
    "å·¨èŸ¹": "å·¨èŸ¹åº§", "cancer": "å·¨èŸ¹åº§", "juxie": "å·¨èŸ¹åº§",
    "ç‹®å­": "ç‹®å­åº§", "leo": "ç‹®å­åº§", "shizi": "ç‹®å­åº§",
    "å¤„å¥³": "å¤„å¥³åº§", "virgo": "å¤„å¥³åº§", "chunv": "å¤„å¥³åº§",
    "å¤©ç§¤": "å¤©ç§¤åº§", "libra": "å¤©ç§¤åº§", "tiancheng": "å¤©ç§¤åº§",
    "å¤©è": "å¤©èåº§", "scorpio": "å¤©èåº§", "tianxie": "å¤©èåº§",
    "å°„æ‰‹": "å°„æ‰‹åº§", "sagittarius": "å°„æ‰‹åº§", "sheshou": "å°„æ‰‹åº§",
    "æ‘©ç¾¯": "æ‘©ç¾¯åº§", "capricorn": "æ‘©ç¾¯åº§", "mojie": "æ‘©ç¾¯åº§",
    "æ°´ç“¶": "æ°´ç“¶åº§", "aquarius": "æ°´ç“¶åº§", "shuiping": "æ°´ç“¶åº§",
    "åŒé±¼": "åŒé±¼åº§", "pisces": "åŒé±¼åº§", "shuangyu": "åŒé±¼åº§"
}

st.title("ğŸ”® æ˜Ÿåº§å°åŠ©æ‰‹ ğŸ”®")
st.markdown("âœ¨ æ”¯æŒ **ç”Ÿæ—¥è½¬æ˜Ÿåº§** å’Œ **æ˜Ÿåº§æŸ¥æ€§æ ¼**ï¼Œå¿«æ¥è¯•è¯•å§ï¼")

# åˆ†ä¸¤æ 
col1, col2 = st.columns(2)

# å·¦æ ï¼šç”Ÿæ—¥è½¬æ˜Ÿåº§
with col1:
    st.header("ğŸ‚ è¾“å…¥ç”Ÿæ—¥")
    birthday_input = st.text_input("è¯·è¾“å…¥ä½ çš„ç”Ÿæ—¥ï¼ˆå¦‚ï¼š6/1ï¼Œ06-01ï¼Œ2025-06-01ï¼‰")
    if birthday_input:
        birth = None
        for fmt in ("%Y-%m-%d", "%m-%d", "%m/%d"):
            try:
                birth = datetime.strptime(birthday_input, fmt)
                birth = birth.replace(year=2000)
                break
            except:
                continue
        if birth:
            month, day = birth.month, birth.day
            zodiac = None
            for sign, start, end in zodiac_dates:
                if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
                    zodiac = sign
                    break
            if zodiac:
                st.success(f"ğŸŒŸ ä½ çš„æ˜Ÿåº§æ˜¯ï¼š**{zodiac}**")
                st.info(f"ğŸ“Œ æ€§æ ¼ç‰¹ç‚¹ï¼š{zodiac_traits.get(zodiac)}")
            else:
                st.error("ğŸ¤” æ²¡æ‰¾åˆ°å¯¹åº”æ˜Ÿåº§ï¼Œè¯·æ£€æŸ¥è¾“å…¥ï½")
        else:
            st.error("âŒ æ— æ³•è¯†åˆ«çš„æ—¥æœŸæ ¼å¼ï¼Œè¯·é‡è¯•ï½")

# å³æ ï¼šæ˜Ÿåº§æŸ¥æ€§æ ¼
with col2:
    st.header("â­ è¾“å…¥æ˜Ÿåº§")
    user_input = st.text_input("è¯·è¾“å…¥æ˜Ÿåº§ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€æ‹¼éŸ³éƒ½æ”¯æŒï¼‰")
    if user_input:
        key = user_input.strip().lower()
        zodiac = zodiac_map.get(key)
        if zodiac:
            trait = zodiac_traits.get(zodiac, "è¿™ä¸ªæ˜Ÿåº§çš„æè¿°è¿˜åœ¨ç¼–å†™ä¸­â€¦â€¦")
            st.success(f"ğŸ‰ ä½ çš„æ˜Ÿåº§æ˜¯ï¼š**{zodiac}**")
            st.info(f"ğŸ“Œ æ€§æ ¼ç‰¹ç‚¹ï¼š{trait}")
        else:
            st.error("ğŸ˜­ æ²¡è¯†åˆ«å‡ºæ˜Ÿåº§ï¼Œè¯·ç¡®è®¤æ‹¼å†™æˆ–æ ¼å¼ï½")
